<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Generator - AI Tools</title>
    <link rel="stylesheet" href="../style.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
    <div class="tool-page">
        <a href="../index.html" class="back-button">
            <i class='bx bx-arrow-back'></i> Back to Tools
        </a>
        
        <div class="tool-header">
            <h1>Password Generator</h1>
            <p>Generate secure passwords with customizable options</p>
        </div>

        <div class="tool-section">
            <div class="form-group">
                <label for="passwordLength">Password Length: <span id="lengthValue">12</span></label>
                <input type="range" id="passwordLength" min="4" max="128" value="12" style="width: 100%;">
            </div>

            <div class="checkbox-group" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                <label class="checkbox-item" style="display: flex; align-items: center; gap: 0.5rem;">
                    <input type="checkbox" id="includeUppercase" checked>
                    <span>Include Uppercase Letters (A-Z)</span>
                </label>
                <label class="checkbox-item" style="display: flex; align-items: center; gap: 0.5rem;">
                    <input type="checkbox" id="includeLowercase" checked>
                    <span>Include Lowercase Letters (a-z)</span>
                </label>
                <label class="checkbox-item" style="display: flex; align-items: center; gap: 0.5rem;">
                    <input type="checkbox" id="includeNumbers" checked>
                    <span>Include Numbers (0-9)</span>
                </label>
                <label class="checkbox-item" style="display: flex; align-items: center; gap: 0.5rem;">
                    <input type="checkbox" id="includeSymbols" checked>
                    <span>Include Symbols (!@#$%^&*)</span>
                </label>
                <label class="checkbox-item" style="display: flex; align-items: center; gap: 0.5rem;">
                    <input type="checkbox" id="excludeSimilar">
                    <span>Exclude Similar Characters (0, O, l, I)</span>
                </label>
                <label class="checkbox-item" style="display: flex; align-items: center; gap: 0.5rem;">
                    <input type="checkbox" id="excludeAmbiguous">
                    <span>Exclude Ambiguous Characters ({ } [ ] ( ) / \ ' " ~ , ; . < >)</span>
                </label>
            </div>

            <div class="form-group">
                <label for="customChars">Custom Characters (Optional):</label>
                <input type="text" id="customChars" placeholder="Add your own characters">
            </div>

            <div style="margin-bottom: 2rem;">
                <button class="button" onclick="generatePassword()">
                    <i class='bx bx-refresh'></i> Generate Password
                </button>
                <button class="button" onclick="generateMultiple()">
                    <i class='bx bx-copy-alt'></i> Generate 5 Passwords
                </button>
                <button class="button button-secondary" onclick="clearAll()">Clear</button>
            </div>

            <div id="passwordResult" style="display: none;">
                <div class="form-group">
                    <label for="generatedPassword">Generated Password:</label>
                    <div style="position: relative;">
                        <input type="text" id="generatedPassword" readonly style="font-family: monospace; padding-right: 3rem;">
                        <button onclick="togglePasswordVisibility()" style="position: absolute; right: 0.5rem; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; color: var(--text-color);">
                            <i class='bx bx-hide' id="visibilityIcon"></i>
                        </button>
                    </div>
                </div>

                <div class="password-strength" style="margin-bottom: 1rem;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <span>Password Strength:</span>
                        <span id="strengthText" style="font-weight: 600;"></span>
                    </div>
                    <div class="strength-bar" style="width: 100%; height: 8px; background: var(--border-color); border-radius: 4px; overflow: hidden;">
                        <div id="strengthBar" style="height: 100%; transition: all 0.3s ease; border-radius: 4px;"></div>
                    </div>
                </div>

                <div class="password-stats" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-bottom: 1rem;">
                    <div class="stat-item" style="text-align: center; padding: 1rem; background: var(--surface-color); border-radius: 8px; border: 1px solid var(--border-color);">
                        <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary-accent);" id="charCount">0</div>
                        <div style="font-size: 0.8rem; color: var(--subtle-text);">Characters</div>
                    </div>
                    <div class="stat-item" style="text-align: center; padding: 1rem; background: var(--surface-color); border-radius: 8px; border: 1px solid var(--border-color);">
                        <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary-accent);" id="entropyBits">0</div>
                        <div style="font-size: 0.8rem; color: var(--subtle-text);">Entropy (bits)</div>
                    </div>
                    <div class="stat-item" style="text-align: center; padding: 1rem; background: var(--surface-color); border-radius: 8px; border: 1px solid var(--border-color);">
                        <div style="font-size: 1rem; font-weight: bold; color: var(--primary-accent);" id="crackTime">0</div>
                        <div style="font-size: 0.8rem; color: var(--subtle-text);">Time to Crack</div>
                    </div>
                </div>

                <button class="button" onclick="copyPassword()">
                    <i class='bx bx-copy'></i> Copy Password
                </button>
            </div>

            <div id="multiplePasswords" style="display: none; margin-top: 2rem;">
                <h3 style="color: var(--text-color);">Multiple Passwords:</h3>
                <div id="passwordList" style="background: var(--surface-color); border-radius: 8px; padding: 1rem; border: 1px solid var(--border-color);"></div>
                <button class="button" onclick="copyAllPasswords()" style="margin-top: 1rem;">
                    <i class='bx bx-copy'></i> Copy All Passwords
                </button>
            </div>
        </div>
    </div>

    <script>
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.body.setAttribute('data-theme', savedTheme);

        const lengthSlider = document.getElementById('passwordLength');
        const lengthValue = document.getElementById('lengthValue');

        lengthSlider.addEventListener('input', () => {
            lengthValue.textContent = lengthSlider.value;
        });

        function generatePassword() {
            const length = parseInt(lengthSlider.value);
            const includeUppercase = document.getElementById('includeUppercase').checked;
            const includeLowercase = document.getElementById('includeLowercase').checked;
            const includeNumbers = document.getElementById('includeNumbers').checked;
            const includeSymbols = document.getElementById('includeSymbols').checked;
            const excludeSimilar = document.getElementById('excludeSimilar').checked;
            const excludeAmbiguous = document.getElementById('excludeAmbiguous').checked;
            const customChars = document.getElementById('customChars').value;

            let charset = '';
            
            if (includeUppercase) charset += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            if (includeLowercase) charset += 'abcdefghijklmnopqrstuvwxyz';
            if (includeNumbers) charset += '0123456789';
            if (includeSymbols) charset += '!@#$%^&*()_+-=[]{}|;:,.<>?';
            if (customChars) charset += customChars;

            if (excludeSimilar) {
                charset = charset.replace(/[0Ol1]/g, '');
            }
            if (excludeAmbiguous) {
                charset = charset.replace(/[{}[\]()\/\\'"~,;.<>]/g, '');
            }

            if (!charset) {
                alert('Please select at least one character type');
                return;
            }

            let password = '';
            for (let i = 0; i < length; i++) {
                password += charset.charAt(Math.floor(Math.random() * charset.length));
            }

            document.getElementById('generatedPassword').value = password;
            document.getElementById('passwordResult').style.display = 'block';
            document.getElementById('multiplePasswords').style.display = 'none';
            
            calculatePasswordStrength(password, charset.length);
        }

        function generateMultiple() {
            const passwords = [];
            for (let i = 0; i < 5; i++) {
                generatePassword();
                passwords.push(document.getElementById('generatedPassword').value);
            }
            
            const passwordList = document.getElementById('passwordList');
            passwordList.innerHTML = passwords.map((pwd, index) => 
                `<div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; margin: 0.25rem 0; background: var(--input-bg); border-radius: 4px;">
                    <span style="font-family: monospace; flex: 1;">${pwd}</span>
                    <button onclick="copySinglePassword('${pwd}')" style="background: none; border: none; cursor: pointer; color: var(--primary-accent);">
                        <i class='bx bx-copy'></i>
                    </button>
                </div>`
            ).join('');
            
            document.getElementById('multiplePasswords').style.display = 'block';
        }

        function calculatePasswordStrength(password, charsetSize) {
            const length = password.length;
            const entropy = Math.log2(Math.pow(charsetSize, length));
            
            document.getElementById('charCount').textContent = length;
            document.getElementById('entropyBits').textContent = Math.round(entropy);
            
            // Calculate time to crack (assuming 1 billion attempts per second)
            const attempts = Math.pow(charsetSize, length) / 2;
            const secondsToCrack = attempts / 1000000000;
            document.getElementById('crackTime').textContent = formatTime(secondsToCrack);
            
            // Determine strength
            let strength, color, percentage;
            if (entropy < 30) {
                strength = 'Very Weak';
                color = '#dc2626';
                percentage = '20%';
            } else if (entropy < 60) {
                strength = 'Weak';
                color = '#f59e0b';
                percentage = '40%';
            } else if (entropy < 90) {
                strength = 'Moderate';
                color = '#eab308';
                percentage = '60%';
            } else if (entropy < 120) {
                strength = 'Strong';
                color = '#22c55e';
                percentage = '80%';
            } else {
                strength = 'Very Strong';
                color = '#16a34a';
                percentage = '100%';
            }
            
            document.getElementById('strengthText').textContent = strength;
            document.getElementById('strengthText').style.color = color;
            const strengthBar = document.getElementById('strengthBar');
            strengthBar.style.width = percentage;
            strengthBar.style.backgroundColor = color;
        }

        function formatTime(seconds) {
            if (seconds < 60) return `${seconds.toFixed(1)} seconds`;
            if (seconds < 3600) return `${(seconds / 60).toFixed(1)} minutes`;
            if (seconds < 86400) return `${(seconds / 3600).toFixed(1)} hours`;
            if (seconds < 31536000) return `${(seconds / 86400).toFixed(1)} days`;
            if (seconds < 31536000000) return `${(seconds / 31536000).toFixed(1)} years`;
            return `${(seconds / 31536000000).toFixed(1)} centuries`;
        }

        function togglePasswordVisibility() {
            const passwordField = document.getElementById('generatedPassword');
            const icon = document.getElementById('visibilityIcon');
            
            if (passwordField.type === 'password') {
                passwordField.type = 'text';
                icon.className = 'bx bx-show';
            } else {
                passwordField.type = 'password';
                icon.className = 'bx bx-hide';
            }
        }

        function copyPassword() {
            const passwordField = document.getElementById('generatedPassword');
            passwordField.select();
            document.execCommand('copy');
            alert('Password copied to clipboard!');
        }

        function copySinglePassword(password) {
            navigator.clipboard.writeText(password).then(() => {
                alert('Password copied to clipboard!');
            });
        }

        function copyAllPasswords() {
            const passwords = Array.from(document.querySelectorAll('#passwordList span'))
                .map(span => span.textContent)
                .join('\n');
            
            navigator.clipboard.writeText(passwords).then(() => {
                alert('All passwords copied to clipboard!');
            });
        }

        function clearAll() {
            document.getElementById('generatedPassword').value = '';
            document.getElementById('customChars').value = '';
            document.getElementById('passwordResult').style.display = 'none';
            document.getElementById('multiplePasswords').style.display = 'none';
        }
    </script>
</body>
</html>
